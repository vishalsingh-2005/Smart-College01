{% extends 'base.html' %}

{% block title %}Manage Notices - SmartCollege{% endblock %}

{% block content %}
<div class="container">
    <h1>Manage Notices</h1>
    <a href="{% url 'create_notice' %}" class="btn btn-success" style="margin-bottom: 20px;">Create New Notice</a>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Target Role</th>
                    <th>Posted By</th>
                    <th>Created</th>
                    <th>Expires</th>
                    <th>Active</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for notice in notices %}
                <tr>
                    <td>{{ notice.title }}</td>
                    <td>{{ notice.target_role|default:"All"|title }}</td>
                    <td>{{ notice.posted_by.username }}</td>
                    <td>{{ notice.created_at|date:"M d, Y" }}</td>
                    <td>{{ notice.expires_at|date:"M d, Y"|default:"Never" }}</td>
                    <td>
                        {% if notice.is_active %}
                            <span style="color: green;">✓ Active</span>
                        {% else %}
                            <span style="color: red;">✗ Inactive</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'edit_notice' notice.id %}" class="btn btn-small">Edit</a>
                        <a href="{% url 'delete_notice' notice.id %}" class="btn btn-small btn-danger" onclick="return confirm('Are you sure you want to delete this notice?')">Delete</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" style="text-align: center;">No notices found</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <a href="{% url 'dashboard' %}" class="btn btn-secondary" style="margin-top: 20px;">Back to Dashboard</a>
</div>
{% endblock %}
