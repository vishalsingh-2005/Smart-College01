{% extends 'base.html' %}

{% block title %}Edit Profile - SmartCollege{% endblock %}

{% block content %}
<div class="edit-profile-container" style="max-width: 800px; margin: 0 auto;">
    <h1>✏️ Edit Profile</h1>
    
    <div class="form-card" style="background: white; padding: 30px; border-radius: 10px; margin-top: 20px;">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            
            <div class="form-section" style="margin-bottom: 30px;">
                <h3 style="margin-bottom: 20px; color: #333;">Personal Information</h3>
                
                <div style="margin-bottom: 20px;">
                    <label for="first_name" style="display: block; margin-bottom: 5px; font-weight: bold;">First Name</label>
                    <input type="text" id="first_name" name="first_name" value="{{ user.first_name }}" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="last_name" style="display: block; margin-bottom: 5px; font-weight: bold;">Last Name</label>
                    <input type="text" id="last_name" name="last_name" value="{{ user.last_name }}" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="email" style="display: block; margin-bottom: 5px; font-weight: bold;">Email</label>
                    <input type="email" id="email" name="email" value="{{ user.email }}" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="phone" style="display: block; margin-bottom: 5px; font-weight: bold;">Phone</label>
                    <input type="text" id="phone" name="phone" value="{{ profile.phone }}" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="date_of_birth" style="display: block; margin-bottom: 5px; font-weight: bold;">Date of Birth</label>
                    <input type="date" id="date_of_birth" name="date_of_birth" value="{{ profile.date_of_birth|date:'Y-m-d' }}" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="address" style="display: block; margin-bottom: 5px; font-weight: bold;">Address</label>
                    <textarea id="address" name="address" rows="3" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">{{ profile.address }}</textarea>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="photo" style="display: block; margin-bottom: 5px; font-weight: bold;">Profile Photo</label>
                    {% if profile.photo %}
                    <div style="margin-bottom: 10px;">
                        <img src="{{ profile.photo.url }}" alt="Current Photo" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover;">
                    </div>
                    {% endif %}
                    <input type="file" id="photo" name="photo" accept="image/*" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                </div>
            </div>
            
            {% if profile.role == 'student' %}
            <div class="form-section" style="margin-bottom: 30px;">
                <h3 style="margin-bottom: 20px; color: #333;">Academic Information</h3>
                
                <div style="margin-bottom: 20px;">
                    <label for="roll_number" style="display: block; margin-bottom: 5px; font-weight: bold;">Roll Number</label>
                    <input type="text" id="roll_number" name="roll_number" value="{{ profile.roll_number }}" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="course" style="display: block; margin-bottom: 5px; font-weight: bold;">Course</label>
                    <input type="text" id="course" name="course" value="{{ profile.course }}" placeholder="e.g., B.Tech Computer Science" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label for="semester" style="display: block; margin-bottom: 5px; font-weight: bold;">Semester</label>
                    <select id="semester" name="semester" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <option value="">Select Semester</option>
                        {% for sem_value, sem_display in profile.SEMESTER_CHOICES %}
                        <option value="{{ sem_value }}" {% if profile.semester == sem_value %}selected{% endif %}>{{ sem_display }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            {% endif %}
            
            <div style="display: flex; gap: 10px;">
                <button type="submit" class="btn" style="background: #667eea;">Save Changes</button>
                <a href="{% url 'profile' %}" class="btn">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
